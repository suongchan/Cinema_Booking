<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Thêm Lịch chiếu | Admin Web</title>
  <link rel="stylesheet" href="js/app.js">
  <link rel="shortcut icon" href="../../static/ImageAdmin/logo-mb.png" type="image/png">
  <!-- GOOGLE FONT -->
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
  <!-- BOXICONS -->
  <link href="https://fonts.gstatic.com" rel="stylesheet">
  <link rel="stylesheet" href="../../static/css/cssAdmin/addCustomer.css">

</head>
<body>
<!-- SIDEBAR -->
<div class="sidebar">
  <div class="sidebar-logo">
    <!--    &lt;!&ndash; logo video &ndash;&gt;-->
    <!--    <a th:href="${home}"> <img src="../static/ImageAdmin/cinema_logo.jpg" alt="Comapny logo"></a>-->
    ADMIN WEB
    <!--    <div class="sidebar-close" id="sidebar-close">-->
    <!--      <i class='bx bx-left-arrow-alt'></i>-->
    <!--    </div>-->
  </div>
  <div class="sidebar-user">
    <div class="sidebar-user-info">
      <img src="../../static/ImageAdmin/user-image-2.png" alt="User picture" class="profile-image">
      <div class="sidebar-user-name">Admin</div>
    </div>
    <button class="btn btn-outline">
      <i class='bx bx-log-out bx-flip-horizontal'></i>
    </button>
  </div>
  <!-- SIDEBAR MENU -->
  <ul class="sidebar-menu">
    <span class="permanent">Quản trị</span>
    <li><a th:href="@{/admin}"> <i class='bx bx-home'></i> <span>quản trị</span> </a></li>
    <li><a th:href="@{/admin/staffList}" > <i class='bx bx-chart'></i> <span>tài khoản</span> </a></li>
    <li><a href="#" th:href="@{/admin/customerList}"  class="active"> <i class='bx bx-chart'></i> <span>khách hàng</span> </a></li>
    <li><a href="#"> <i class='bx bx-chart'></i> <span> thể loại </span> </a></li>
    <li><a href="#"> <i class='bx bx-chart'></i> <span> tin tức </span> </a></li>

    <span class="permanent">Danh mục</span>
    <li><a href="#"> <i class='bx bx-shopping-bag'></i> <span>Rạp chiếu</span> </a></li>
    <li><a href="#"> <i class='bx bx-chart'></i> <span>Phòng chiếu</span> </a></li>
    <li><a href="#"> <i class='bx bx-chart'></i> <span>Ghế</span> </a></li>
    <li><a href="#"> <i class='bx bx-chart'></i> <span> Phim </span> </a></li>
    <li><a href="#"> <i class='bx bx-chart'></i> <span> Dịch vụ </span> </a></li>

    <span class="permanent" >Nghiệp vụ</span>
    <li><a href="#"> <i class='bx bx-chart'></i> <span>Đặt vé</span> </a></li>
    <li><a href="#"> <i class='bx bx-chart'></i> <span> Lịch chiếu </span> </a></li>

    <span class="permanent" >Báo cáo - Thống kê</span>
    <li><a href="#"> <i class='bx bx-chart'></i> <span>Báo cáo</span> </a></li>
    <li><a href="#"> <i class='bx bx-chart'></i> <span>Thống kê</span> </a></li>


    <!--    <li class="sidebar-submenu"><a href="#"-->
    <!--                                   class="sidebar-menu-dropdown"> <i class='bx bx-user-circle'></i>-->
    <!--      <span>account</span>-->
    <!--      <div class="dropdown-icon"></div>-->
    <!--    </a>-->
    <!--      <ul class="sidebar-menu sidebar-menu-dropdown-content">-->
    <!--        <li><a href="#"> edit profile </a></li>-->
    <!--        <li><a href="#"> account settings </a></li>-->
    <!--        <li><a href="#"> billing </a></li>-->
    <!--      </ul></li>-->
    <!--    <li class="sidebar-submenu"><a href="#" class="sidebar-menu-dropdown"> <i class='bx bx-category'></i> <span>project</span>-->
    <!--      <div class="dropdown-icon"></div>-->
    <!--    </a>-->
    <!--      <ul class="sidebar-menu sidebar-menu-dropdown-content">-->
    <!--        <li><a href="#"> list </a></li>-->
    <!--        <li><a href="#"> add project </a></li>-->
    <!--      </ul></li>-->
    <!--    <li class="sidebar-submenu"><a th:href="${adminProduct}" class="sidebar-menu-dropdown"> <i class='bx bx-category'></i> <span>Product</span>-->
    <!--      &lt;!&ndash; <div class="dropdown-icon"></div> &ndash;&gt;-->
    <!--    </a>-->
    <!--      <ul class="sidebar-menu sidebar-menu-dropdown-content">-->
    <!--        <li><a href="#"> list product </a></li>-->
    <!--        <li><a href="#"> add product </a></li>-->
    <!--        <li><a href="#"> orders </a></li>-->
    <!--      </ul></li>-->
    <!--    <li><a href="#"> <i class='bx bx-mail-send'></i> <span>mail</span>-->
    <!--    </a></li>-->
    <!--    <li><a href="#"> <i class='bx bx-chat'></i> <span>chat</span>-->
    <!--    </a></li>-->
    <!--    <li><a href="#"> <i class='bx bx-calendar'></i> <span>calendar</span>-->
    <!--    </a></li>-->
    <!--    <li class="sidebar-submenu"><a href="#"-->
    <!--                                   class="sidebar-menu-dropdown"> <i class='bx bx-cog'></i> <span>settings</span>-->
    <!--      <div class="dropdown-icon"></div>-->
    <!--    </a>-->
    <!--      <ul class="sidebar-menu sidebar-menu-dropdown-content">-->
    <!--        <li><a href="#" class="darkmode-toggle" id="darkmode-toggle">-->
    <!--          darkmode <span class="darkmode-switch"></span>-->
    <!--        </a></li>-->
    <!--      </ul></li>-->
  </ul>
  <!-- END SIDEBAR MENU -->
</div>
<!-- END SIDEBAR -->
<main>
  <div class="box">

    <div class="box-body overflow-scroll">

      <div class="header-right">
        <img src="../../static/ImageAdmin/user-image-2.png" alt="admin-logo">
        <span class="header-text"> Admin</span>
      </div>
      <!--        <thead>-->
      <!--        <tr>-->
      <!--&lt;!&ndash;          <th>ID</th>&ndash;&gt;-->
      <!--&lt;!&ndash;          <th>User Name</th>&ndash;&gt;-->
      <!--&lt;!&ndash;          <th>Email</th>&ndash;&gt;-->
      <!--&lt;!&ndash;          <th>Password</th>&ndash;&gt;-->
      <!--&lt;!&ndash;          <th>Edit</th>&ndash;&gt;-->
      <!--          <th><img src="../static/ImageAdmin/user-image-2.png" alt=""> Delete</th>-->
      <!--        </tr>-->
      <!--        </thead>-->

      <!--      <table>-->
      <!--        <tbody>-->
      <!--        <th:forEach items="${UserList}" var="user">-->
      <!--          <tr>-->
      <!--            <td>${user.id}</td>-->
      <!--            <td>-->
      <!--              <div class="order-owner">-->
      <!--                <img src="../static/ImageAdmin/user-image-2.png"-->
      <!--                     alt="user image"> <span>${user.username}</span>-->
      <!--              </div>-->
      <!--            </td>-->
      <!--            <td>${user.email}</td>-->
      <!--            <td><span class="order-status order-ready"> ${user.password}-->
      <!--								</span></td>-->
      <!--            <td>-->
      <!--              <div class="payment-status payment-pending">-->
      <!--                <div class="dot"></div>-->
      <!--                <a href="#">Edit</a>-->
      <!--              </div>-->
      <!--            </td>-->
      <!--            <td><a href="#">Delete</a></td>-->
      <!--          </tr>-->
      <!--        </th:forEach>-->
      <!--        </tbody>-->
      <!--      </table>-->
      <div class="admin-taikhoan">
        <div class="taikhoan-header">
          <span class="text1">Lịch chiếu</span>
          <span class="text2">Thêm lịch chiếu</span>
        </div>
        <div class="taikhoan-body">

          <form class="form-containers"  th:action="@{/admin/editShow}" method="POST" th:object="${showtime}">
            <div th:if="${conflictingShowtimes}" class="alert alert-danger">
              Lịch chiếu trùng lịch. Vui lòng chọn thời gian khác.
            </div>
            <input type="hidden" th:field="*{idShow}" />
            <div class="form-row" >

            <label for="join_datepicker"> Ngày chiếu</label>
            <input type="date" class="dateShow" placeholder="yyyy-MM-dd" id="join_datepicker" name="dateShow" th:value="*{dateShow}" >
        </div>
        <div class="form-row" >
          <label for="join_datepicker1"> Giờ bắt đầu</label>
          <input type="time" class="start" placeholder="HH:mm" id="join_datepicker1" name="start" th:value="*{start}" >
        </div>

        <div class="form-row" >
          <label for="join_datepicker2">Giờ kết thúc</label>
          <input type="time" class="end" placeholder="HH:mm" id="join_datepicker2" name="end" th:value="*{end}" >
        </div>

        <div class="form-row" >
              <label for="cinema">Rạp</label>
              <select id="cinema" name="cinemaEntity.idCinema" th:field="*{cinemaEntity}">
<!--                <option value="" selected disabled>Chọn rạp</option> &lt;!&ndash; Option mặc định &ndash;&gt;-->
                <option th:each="cinema : ${cinemas}" th:value="${cinema.idCinema}" th:text="${cinema.nameCinema}"></option>
              </select>

              <div>

                <div class="form-row" >
                  <label for="room">Phòng chiếu</label>

                  <select id="room" name="cinemaRoomEntity.idCinemaRoom" th:field="*{cinemaRoomEntity}" required>
<!--                    <option value="" selected disabled>Chọn phòng</option> &lt;!&ndash; Option mặc định &ndash;&gt;-->
                    <option th:each="room : ${rooms}" th:value="${room.idCinemaRoom}" th:text="${room.nameCinemaRoom}" th:data-cinema-id="${room.cinemaEntity.idCinema}"></option>
                  </select>

                  <div>

                    <div class="form-row" >
                      <label for="name">Tên phim</label>

                      <select id="name" name="filmEntity.idFilm" th:field="*{filmEntity}" required>
                        <!-- Populate the options with cinema data -->
                        <option th:each="film : ${films}" th:value="${film.idFilm}" th:text="${film.nameFilm}"></option>
                      </select>
                      <div>


                        <input type="submit" value="Lưu" class="submit">

                        <script>

                          // Lấy thẻ select của rạp và phòng chiếu
                          const cinemaSelect = document.getElementById("cinema");
                          const roomSelect = document.getElementById("room");

                          // Sự kiện khi thay đổi giá trị của select "Rạp"
                          cinemaSelect.addEventListener("change", function () {
                            const selectedCinemaId = cinemaSelect.value;

                            // Lặp qua danh sách phòng chiếu và hiển thị chỉ những phòng thuộc rạp được chọn
                            const roomOptions = roomSelect.querySelectorAll("option");
                            roomOptions.forEach(function (option) {
                              const cinemaId = option.getAttribute("data-cinema-id");
                              if (cinemaId === selectedCinemaId || selectedCinemaId === "") {
                                option.style.display = "block"; // Hiển thị phòng chiếu
                              } else {
                                option.style.display = "none"; // Ẩn phòng chiếu
                              }
                            });
                          });
                        </script>

                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </form>

        </div>
      </div>
    </div>
  </div>
</main>
</body>